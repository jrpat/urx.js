<!doctype html>
<html>
  <head>
    <link rel=stylesheet href="./base.css">
    <script defer src="./util.js"></script>
    <style>
      #logOutput {
        position: fixed;
        right: 0;
        top: 0;
        height: 100%;
        width: 20vw;
        overflow: scroll;
        border-left: 1px solid var(--line);
        background: var(--pane);
        font-size: 0.75em;
      }
      
      #app { padding: 1em; }
    </style>
  </head>

  <body vbox=stretch>
    <div id=app></div>

    <template name=simple>
      <script>
        const x = atom(5)
        const hilo = calc(() => (x.value > 99) ? 'high' : '-low')
        window.hilo = hilo
        const flub = () => console.log(hilo.value)
        async function doit() {
          await after(1000, () => { x.value = 50 })
          await after(1000, () => { x.value = 100 })
          await after(1000, () => { console.log('ok') })
        }
        effect(() => log(x.value))
        doit()
        return {x, hilo, flub}
      </script>
      {{ 'hilo = ' + hilo.value }}
    </template>

    <template name=simple ignore>
      <script>
        const x = atom(5)
        const hilo = calc(() => (x.value > 99) ? 'high' : '-low') 
        async function doit() {
          await after(1000, () => { x.value = 10 })
          await after(1000, () => { x.value = 50 })
          await after(1000, () => { x.value = 100 })
          await after(1000, () => { console.log('ok') })
        }
        doit()
        return {x, hilo}
      </script>

      {{ x.value.toString().padStart(3, '.') }}
      <br>
      {{ hilo.value + ' ' + (Date.now()) }}
      <br>
      <b foo:="x.value">x = {{ x.value }}</b>
      <input value:="x.value">
      <button disabled?="x.value < 100" @click="(event) => console.log(event)">click me</button>
      <br>
      <show if="x.value < 100">
        <show if="x.value < 11">very</show>low
      </show>
      <switch>
        <show if="x.value == 5">five</show>
        <show if="x.value == 10">ten</show>
        <show if="x.value == 50">fifty</show>
        <show if="x.value == 100">one hundred</show>
      </switch>
    </template>

    <template name=my-component ignore>
      <script>
        const x = Atom(5)
        const arr = Atom([1,2,3])
        return {x, arr}
      </script>

      <div>x = {{ x() }}</div>
      <input name:="x()">
      <show if="x > 5">
        x is high!
      </show>
      <ul>
        <for each="item of arr()">
          <li>{{ item }}</li>
        </for>
      </ul>
      <button disabled?="x() > 10"></button>
    </template>

<!--    <div id="_test" foo:=bar bar?=baz>ok</div>-->

    <template name=my-tpl ignore>
      <!--| x() |-->
    </template>
  </body>

  <script type=module>
    import ui from '/lib/urx-dom.js'
    import * as urx from '/lib/urx.js'
    Object.assign(window, {ui, urx})
    ui.render('simple', $('#app'))
  </script>
</html>

